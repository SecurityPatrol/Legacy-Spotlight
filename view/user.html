<html lang="ja">

    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <meta http-equiv="pragma" content="no-cache">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="content-style-type" content="text/css">
        <meta http-equiv="content-script-type" content="text/javascript">
        <link rel="stylesheet" href="css/base.css">
        <link rel="stylesheet" href="css/layout.css">
        <script src="js/binding.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>

            var socketio = io()

            window.onload = function(){

                bind.hide( 'tweet' )

                var data = JSON.parse( sessionStorage.getItem( 'editList' ) )

                document.getElementById('rank').innerHTML = 'Rank ' + sessionStorage.getItem( 'editName' )
                sessionStorage.removeItem( 'editName' )

                bind.binding( 'tweet', data.response )
                
                
                bind.view( 'tweet' )

            }
            
            /*
            function getUserProfile( id ){
                socketio.emit( 'getUserProfile', id )
            }
            */
            
            socketio.on( 'processError', function( error ){
                alert( 'エラーが発生しました．\n\n' + error.value )
            } )
            
            /*
            socketio.on( 'gotUserProfile', function(data){
                
                console.log( data.value.tweets )
                console.log( data.value.profile.screen_name )
                console.log( document.getElementById( 'bind' + data.value.profile.screen_name ) )
                
                document.getElementById( 'bind' + data.value.profile.screen_name ).style.display = 'block'
                bind.binding( 'bind' + data.value.profile.screen_name, data.value.tweets )
                
                
            } )
            */

        </script>
    </head>

    <body>

        <div id="application">

            <div id="nav">
                <div id="appName">SPOTLIGHT</div>
                <a href="/">
                    <div class="menu">メインページ</div>
                </a>
                <a href="/search">
                    <div class="menu">検索</div>
                </a>
                <a href="/list">
                    <div class="menu selected">ランク/リスト</div>
                </a>
                <a href="/setting">
                    <div class="menu">設定</div>
                </a>
            </div>

            <div id="article">
                <div id="header">
                    <div class="htext" id="rank"></div>
                </div>
                <div id="padding">

                    <div class="label">Result</div>

                    <div id="tweet">
                        <div class="tw clearfix" id="n{{id}}" rank="{{rank}}" onclick="getUserProfile( '{{screen_name}}' )">
                                <span class="userid">{{id}}</span>
                                <br>
                                <span class="username">{{name}}</span>
                                <span class="userscreenname">@{{screen_name}}</span>
                                <!--
                                <div id="bind{{screen_name}}" style="display:none">
                                    <div class="tw clearfix">
                                            <span id="text{{INDEX}}">{{text}}</span>
                                            <br><br>
                                            <span class="created_at">{{created_at}}</span>
                                    </div>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>

    </body>

</html>